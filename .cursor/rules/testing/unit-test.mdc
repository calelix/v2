---
alwaysApply: true
---

Unit Test Guide

> 최신 업데이트: 2026년 01월 29일 00:00

# Unit 테스트 전략

순수 로직만 독립적으로 테스트

---

# 정의

**Unit 테스트:**
- UI 없이 단일 책임 단위의 로직 검증
- 외부 의존성과 분리
- 매우 빠른 실행 속도
- 많은 엣지 케이스 검증에 적합

**특징:**
- 실행 속도: 매우 빠름
- 테스트 환경: Node.js (가상 DOM 불필요)
- 범위: 함수 입력 → 출력

---

# 언제 사용하는가

## Unit 테스트가 적합한 경우

### 순수 함수
- 같은 입력 → 같은 출력
- Side effect 없음
- UI 독립적

### 유틸리티 함수
- 포맷팅, 변환, 정규화 함수

### 복잡한 계산 로직
- 수학적 연산
- 비즈니스 계산

### Validation 로직
- 입력 검증
- 형식 검사

### 도메인 로직
- UI와 독립적인 비즈니스 규칙

---

## Unit 테스트가 부적합한 경우

### UI 컴포넌트
→ Integration 테스트로

### API 호출 로직
→ Integration에서 모킹

### 상태 관리와 UI 결합
→ Integration으로 통합 테스트

### Wrapper / Presentational
→ 테스트 불필요

---

# 테스트 대상

## 1. 순수 함수

**검증 항목:**
- Happy path
- Edge cases
- Error cases
- Boundary values

---

## 2. Validation 로직

**검증 항목:**
- 유효/무효 입력
- 빈 값 처리
- 경계값

---

## 3. 계산 로직

**검증 항목:**
- 정확성
- 수치 처리
- 예외 상황
   - 계산 결과가 숫자의 표현 범위를 초과하여 정확하지 않거나 의미 없는 값이 되는 상황, NaN 등

---

## 4. 데이터 변환

**검증 항목:**
- 입력/출력 포맷
- 예외 데이터 처리

---

## 5. Custom Hooks (Logic Only)

**조건:**
- UI 의존성 없음
- Side effect는 mock 가능한 외부 의존성에 한해 허용
  (fetch, storage, timer 등)

**검증 항목:**
- 상태 변화
- Side effect 동작

---

# Edge Case 체크리스트
- 정상적인 사용 흐름의 바깥쪽에 있는 입력 / 상태
- 이 체크리스트는 테스트 대상 로직에 대해 어떤 경계값을 검토해야 하는지 빠르게 판단하기 위한 가이드

## 숫자
- [ ] 0, 음수, 양수
- [ ] Infinity, NaN
- [ ] 부동소수점 정밀도

## 문자열
- [ ] 빈 문자열, 공백
- [ ] 특수문자
- [ ] 매우 긴 문자열

## 배열/객체
- [ ] 빈 값
- [ ] null/undefined
- [ ] 누락/추가 필드

## 날짜
- [ ] 시간대, 윤년
- [ ] Invalid Date

---

# 테스트 작성 원칙

## 1. 독립성
- 각 테스트는 독립적
- 실행 순서 무관
- 공유 상태 없음

## 2. 명확성
- 테스트 이름이 의도 설명
- Given-When-Then 구조
- 하나의 테스트는 하나의 케이스만

## 3. 완전성
- Happy path 커버
- Edge cases 커버
- Error cases 커버

Error cases 예:
- throw 발생
- invalid input
- required field 누락

## 4. 빠른 실행
- 외부 의존성 최소화
- 모킹 최소화
- 병렬 실행 가능

---

# 모킹 전략

## 최소 모킹 원칙

**Unit 테스트는 가능한 모킹을 피한다**

- 순수 함수는 모킹 불필요
- 외부 의존성만 모킹
- 구현이 아닌 인터페이스 모킹

---

## 모킹이 필요한 경우

### 외부 API
- HTTP 요청, 데이터베이스

### 시간 의존 코드
- Date, Timer 함수

### 랜덤 값
- Random, UUID 생성

### 브라우저 API
- Storage, Navigator 등

---

# 안티패턴

## 피해야 할 것

### 1. 구현 테스트
내부 구현이 아닌 동작(behavior) 검증

### 2. 과도한 모킹
순수 함수는 모킹 불필요

### 3. 테스트 간 의존성
실행 순서 무관하게 작성

### 4. 너무 큰 단위
Integration 테스트로 이동

### 5. 의미 없는 테스트
getter/setter, 단순 할당 제외  
예: 단순 return value만 있는 함수

---

# 커버리지 목표

**권장 커버리지:**
- 순수 로직: 100%
- Validation 함수: 100%
- 계산 로직: 100%
- 유틸리티: 90%+

**주의:**
- 커버리지는 수단이지 목적이 아님
- 의미 있는 테스트가 중요
- 단순 함수는 제외 가능
